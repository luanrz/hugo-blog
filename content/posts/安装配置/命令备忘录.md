---
title: 命令备忘录
date: 2021-04-02 09:50:12
categories:
- 安装配置
- 应用软件
tags: 
- Linux
---

{% tabs command %}

<!-- tab gdb -->
# GDB

## 编译

`gcc Hello.cpp`  生成可执行文件a.out

`gcc -o Hello.o Hello.cpp`  生成可执行文件Hello.o

`gcc -g -o Hello.o Hello.cpp`  生成可调试的可执行文件Hello.o

## 调试

`gdb Hello.o`

## 常用GDB命令

`break` ：新增断点。后接一个参数，表示在指定位置增加断点，参数格式为：[源文件名:]<方法名> | [源文件名:]<行数>

`delete`：删除断点。后接零个参数，表示删除所有断点。后接一个参数，表示删除指定序号的断点，参数格式为：<序号>

`step`：往下执行语句，会进入函数。后接零个参数，表示往下执行一条语句。后接一个参数，表示往下执行指定数目的多条语句，参数格式为：<向下行数>

`next`：往下执行语句，不会进入函数。参数规范与step类似

`continue`：继续运行

`finish`：运行至当前函数返回后退出

`list`：查看代码

`frame`：查看帧栈

`backstrace`：查看整个调用栈

`info `：查看信息。后接一个参数，参数格式为：<args | locals>，args表示查看函数参数，locals表示查看局部变量

`print`：打印值。
<!-- endtab -->


<!-- tab git -->
# Git

## 删除远程分支

`git push origin --del rzluan-orderchange/ndc_xml_api_v3`

## 克隆指定分支到指定文件夹

`git clone -b [branch_name] [git_url] [dir_path]`

## 变更统计

```
git log --author=rzluan --after="2019-11-01 00:00:00" --before="2019-11-30 23:59:59" --name-only | grep '^src/*' | sort |  uniq 
git log --author=rzluan --after="2019-11-01 00:00:00" --before="2019-11-30 23:59:59" --numstat | grep "src" | awk '{a[$3]+=$1;b[$3]+=$2}END{for(j in a) print j,"代码变更"(a[j]+b[j])"行"}'
git log --author=rzluan --after="2019-11-01 00:00:00" --before="2019-11-30 23:59:59" --numstat | grep "src" | awk '{a[$3]+=($1+$2)}END{for(j in a) b+=a[j]} END{print "总行数",b}'
```

## 修改commit记录

1. 修改提交时间：`git commit --amend --date="May 8 12:00:30 2020 +0800"`

2. 修改提交人信息：`git commit --amend --author "luanrzh luanrzh@qq.com"`

3. 强制推送至远程仓库：`git push <remote> <branch> -f`

## 撤销commit

1. `1git reset HEAD` : 撤销commit，撤销暂存区，工作空间代码改动不变
2. `git reset --mixed HEAD^` : 同上
3. `git reset --soft HEAD^` : 撤销commit，暂存区不变，工作空间代码改动不变
4. `git reset --hard HEAD^` : 撤销commit，清空暂存区，清空工作空间代码改变
5. `git reset HEAD~n` : 撤销n次commit
6. `git commit --amend` : 修改commit注释
<!-- endtab -->


<!-- tab idea -->
# IDEA

## Editor Basics

### Actions

`Ctrl + Shift + A`

### Select

`Ctrl + Shift + →`	Select a word

`Ctrl + Shift + ←`	Select a word

`Ctrl + W`	Extend the select

`Ctrl + Shift + W`	Shrink the select

`Ctrl + A `	Select whole file

### Comment Line

`Ctrl + /`	Comment out or uncomment line(s)

### Delete Line

`Ctrl + Y`	Delete line(s)

`Ctrl + Z` 	Restore the deleted line(s)

### Duplicate

`Ctrl + D` 	Duplicate line(s)

### Move

`Alt + Shift + ↓`	pull down line(s)

`Alt + Shift + ↑`	pull up line(s)

`Ctrl + Shift + ↓`	pull down class member

`Ctrl + Shift + ↑`	pull up class member

### Collapse

`Ctrl + -`	collapse a region(eg. method)

`Ctrl + +`	expand a region

`Ctrl + Shift + -`	collapse all regions

`Ctrl + Shfit + +`	expand all regions

### Multiple Selections

`Alt + J`	Select the symbol at the caret or select the next occurrence of this symbol

`Alt + Shift + J`	deselect the last occurrence

`Ctrl + Alt + Shfit + J`	select all occurrence in the file

## Code Completion

### Basic Completion

`Ctrl + SpaceKey `	activate basic completion(replace `Enter` with `tab` to overwrite the word rather than simply insert it)

### Smart Type Completion

`Ctrl + Shift + SpaceKey `	activate smart type completion

### Statement Completion

`Ctrl + Shift + Enter`	complete the statement

## Refactorings

### Rename

`Shift + F6`	rename

### Extract Variable/Field

`Alt + Shift + V`	introduce local variable or field(you can also use `Alt + Enter` and select the list item )

### Refactoring Basics

`Ctrl + Alt + C`	extract the selected expression into a constant

`Ctrl + Alt + M`	extract the selected code block into a method

`Ctrl + Alt + P`	extract the selected expression into a parameter (*not work*)

## Code Assistance

### Code Formatting

`Alt + Shift + L`	correct code formatting

### Parameter Info

`Ctrl + P` see the method signature

### Quick Popups

`Ctrl + Q`	see documentation  for the symbol at the caret(`Esc` to close the popup)

`Ctrl + Shift + I`	see the definition of the symbol at the caret

### Editor Coding Assistance

`F2`	go to the next highlighted error in the file

`Ctrl + 1`	see the error description

`Alt + Enter`	show suggestions and fix it

`Ctrl + Alt + T`	surround with

`Ctrl + Shift + 7`	highlight all usages of the symbol at the caret

## Navigation

### Jump to source

`F4`	jump to source(include jdk classes)

###  Declaration/Implementation

`Ctrl + B`	jump to the declaration of a class or interface

`Ctrl + Alt + B`	see implementations of a class/interface

### File Structure

`Ctrl + 0`	see file structure

### Next/Previous Occurrences

`Ctrl + F`	find all word  you selected

`F3`	find next occurrences

`Shfit + F3`	find previous occurrences
<!-- endtab -->


<!-- tab java -->
# Java

## Java序列化

`new ObjectOutputStream(new FileOutputStream("resp")).writeObject(resp);`

## 配置VM参数"javaagent"以支持切面编程

```java
- javaagent:/home/luanrzh/.m2/repository/org/aspectj/aspectjweaver/1.9.4/aspectjweaver-1.9.4.jar
```

## 启用远程调试

```java
java -jar \
-Dserver.port=8080 \
-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8081 \
parent-0.0.1-SNAPSHOT.jar
```

## jasypt加密解密

```java
java -cp jasypt-1.9.2.jar org.jasypt.intf.cli.JasyptPBEStringEncryptionCLI input=123456 password=1234-1234-1234-1234 algorithm=PBEWithMD5AndDES

java -cp jasypt-1.9.2.jar org.jasypt.intf.cli.JasyptPBEStringDecryptionCLI input="jvp0W0qUkv0WmG/JzwyUTA==" password=1234-1234-1234-1234 algorithm=PBEWithMD5AndDES
```
<!-- endtab -->


<!-- tab linux -->
# Linux

## 会话管理——使用`screen`恢复掉线的shell会话

`screen -S myScreen`

`screen -r myScreen`

## 显示当前目录所占用的磁盘空间

`du -h --max-depth=1`

## 访问NFS服务

`sudo pacman -S core/nfs-utils` #ArchLinux下安装nfs-utils，不然没有showmount命令

`showmount -e 192.168.1.105` #显示指定IP上挂载的卷

`sudo mount -t nfs -o proto=tcp,nolock 192.168.1.105:/volume1/homes homes/` #开始挂载

## 访问SMB服务

`sudo pacman -S smbclient` #安装

` smbclient -L 192.168.0.100 -U username%password` # 显示共享目录

` smbclient //192.168.0.100/directory -U username%password` # 进入上述共享目录中的directory目录

## 一键删除所有项目下的target

`find . -name target | awk '{print "rm -rf "$1}' | sh`

## 扫描局域网所有IP与端口

`nmap -sP 192.168.1.0/24`

`nmap -A 192.168.1.100`

## 压缩与解压

|        |             压缩             |         解压          |
| :----: | :--------------------------: | :-------------------: |
| tar.gz | tar czvf  test.tar.gz  test/ | tar xzvf  test.tar.gz |
| tar.xz | tar cJvf  test.tar.xz test/  | tar xvf  test.tar.xz  |
|  zip   |     zip test.zip test/*      |    unzip test.zip     |
|  rar   |     rar test.rar test/*      | (un)rar x(e) test.rar |

<!-- endtab -->


<!-- tab vim -->
# Vim

## 浏览

- `ctrl-f`  向下一翻页（f = forword ）
- `ctrl-b` 向上一翻页（b = backward）
- `ctrl-d` 向下翻半页（d = down）
- `ctlr-u` 向上翻半页（u = up）
- `ctrl-e` 向下滚一行
- `ctrl-y` 向上滚一行
- `zz` 让光标所在的行居屏幕中央
- `zt` 让光标所在的行居屏幕最上一行 t=top
- `zb` 让光标所在的行居屏幕最下一行 b=bottom

## 编辑

- `u` 撤销
- `Ctrl-r` 恢复撤销

## 替换

- `:%s/a/b/g` 将所有的a替换为b
<!-- endtab -->


{% endtabs %}